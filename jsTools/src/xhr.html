<!DOCTYPE html>
<html>
<head>
  <title>XMLHttpRequest</title>
</head>
<body>
<p>XMLHttpRequest 对象提供了对 HTTP 协议的完全的访问，包括做出 POST 和 HEAD 请求以及普通的 GET 请求的能力。XMLHttpRequest 可以同步或异步地返回 Web 服务器的响应，并且能够以文本或者一个 DOM 文档的形式返回内容。
尽管名为 XMLHttpRequest，它并不限于和 XML 文档一起使用：它可以接收任何形式的文本文档。
XMLHttpRequest 对象是名为 AJAX 的 Web 应用程序架构的一项关键功能。</p>

<p>get</p>
<script type="text/javascript">
// xhr 详见 js/xhr.js
var req = new XMLHttpRequest()
var url = 'http://tongdun.baidao.com/ping/ip'
req.error = function(cb) {
  console.log('req error...')
}

req.onreadystatechange = function() {
  console.log('req.readyState', req.readyState, req.status)
  if (req.readyState === 4) {
    if(req.status === 200) {
      console.log(req.responseText)
    }
  }

}
req.open('GET', url, true)
req.send()


// JavaScript 通过XMLHttpRequest(XHR)来执行异步请求，这个方式已经存在了很长一段时间。虽说它很有用，但它不是最佳API。它在设计上不符合职责分离原则，将输入、输出和用事件来跟踪的状态混杂在一个对象里。而且，基于事件的模型与最近JavaScript流行的Promise以及基于生成器的异步编程模型不太搭（事件模型在处理异步上有点过时了——译者注）。

// 新的 Fetch API打算修正上面提到的那些缺陷。 它向JS中引入和HTTP协议中同样的原语（即Fetch——译者注）。具体而言，它引入一个实用的函数 fetch() 用来简洁捕捉从网络上检索一个资源的意图。
//
// fetch详见： http://www.tuicool.com/articles/QZBJ7zJ
fetch(url).then(function(res) {
  console.log(res,' fetch response')
})

</script>
</body>
</html>