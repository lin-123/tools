<!DOCTYPE html>
<html>
<head>
  <title>dom</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="./common.css">
  <script type="text/javascript">
    // 返回每个代码块的局部 document对象， 就是包裹此代码快的 div元素
    function getPartDocument(id){
      return document.getElementById(id)
    }
  </script>
</head>
<body>
  <div class="content" id='elemRectAndScroll_3'>
    <h1>查询元素的几何尺寸 getBoundingClientRect</h1>
    <p>这里显示上面标题的尺寸： <span class="red"></span></p>
    <hr>
    <h1>滚动 window属性 scrollBy scroll scroolTo</h1>
    <div id="scroll_div" class="content">
      <p>================1</p>
      <p>================2</p>
      <p>================3</p>
      <p>================4</p>
    </div>
    <script type="text/javascript">
      // 1.元素的几何尺寸
      _document = getPartDocument('elemRectAndScroll_3')
      rect = _document.querySelector('h1').getBoundingClientRect()
      _document.getElementsByTagName('span')[0].innerText = "width: "+rect.width+" height: "+rect.height

      // 2.滚动
      function scrollXX(){
        window.scroll(0, 10) //两个参数，为x,y坐标， 表示窗口滚动到指定的点出现在视口的左上角 作用=scrollTo
        window.scrollBy(0, 10) //两个参数，为x,y坐标， 表示相对当前窗口滚动(0, 10)个像素
        setTimeout(function(){
          document.querySelectorAll('#scroll_div p')[3].scrollIntoView()
        }, 100)
      }
      scrollXX()
    </script>

    <style type="text/css">
      #scroll_div{
        height: 100px;
        overflow: scroll;
      }
    </style>
  </div>



  <div class="content" id='dom_selector_2'>
    <h1>dom选择器</h1>
    <div id='parent_tag' name='div_p'>
      <p id="child_tag">dom 选择器</p>
    </div>
    <script type="text/javascript">
      // 1.dom选择器 tag+id 选择
      var document = getPartDocument('dom_selector_2')
      var parentTag = document.getElementById('parent_tag')
      var childTag = parentTag.getElementsByTagName('p')[0]
      console.log(childTag === document.getElementById('child_tag'), childTag.innerHTML, 'dom选择器， 不仅可以用document选择， 每个element也有getElementsByTagName的属性')

      // 2. css选择器方式， 通过document.querySelectorAll('此处添加css 选择器的字符串参数')
      // querySelectorAll, 和querySelector都可以用css选择器的字符串作为参数， 前者返回nodeList, 后者返回第一个元素， 【 非常强大 】， jQuery中就用到这种技术
      // div[name="div_p"] 选择name=div_p的div元素
      console.log('2. css选择器方式\n', document.querySelectorAll('*[name="div_p"]'))
    </script>
  </div>

  <div id='insertHTML_1' class="content">
    <h1>html插入内容 insertAdajcentHTML </h1>
    <p>first p tag</p>
    <script type="text/javascript">
      _document = getPartDocument('insertHTML_1')
      // 1. ========= insertAdjacentHTML ==========
      // 将任意的HTML标记字符串插入到指定的元素的相邻位置，
      // 第一个参数：beforeBegin afterBegin beforeEnd afterEnd
      // 第二个参数是html标记字符串 如： 'this is a message', '<p>this is another message</p>'
      // _document.querySelector('p').insertAdjacentHTML('beforeBegin', _document.querySelectorAll('p')[0].outerHTML)
      _document.querySelector('p').insertAdjacentHTML('beforeBegin', '<p>insertAdajcentHTML: this is another message</p>')

      // 2.========= appendChild inserBefore ===========
      // 使用 appendChild inserBefore将文档中已存在的节点再次插入， 那个节点将自动从它当前位置删除并在新的位置重新插入
      var newLabel = document.createElement('label')
      newLabel.innerText = '先insertBefore后appendChild 结果:  这个标签将会插入到文档后面'
      newLabel.style.color = 'red'
      _document.insertBefore(newLabel, _document.firstChild)
      _document.appendChild(newLabel)

      // 2.1 通过document创建一个新的p元素, 然后将其插入doc文档中，也可以多次插入
      var newP = {}
      for(i in [0,1,2]){
        newP = document.createElement('p')
        newP.innerText='insertBefore: this is new p tag'
        _document.insertBefore(newP, _document.firstChild)
        // _document.appendChild(newP)
      }
    </script>
  </div>
</body>
</html>